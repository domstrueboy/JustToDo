var t,e,s=Object.defineProperty,o=Object.prototype.hasOwnProperty,i=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,a=(t,e,o)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,r=(t,e)=>{for(var s in e||(e={}))o.call(e,s)&&a(t,s,e[s]);if(i)for(var s of i(e))n.call(e,s)&&a(t,s,e[s]);return t};import{d as l,r as d,u as c,c as m,w as u,v as p,a as I,b,e as v,p as L,f,o as g,g as T,h as y,t as h,i as _,F as O,j as w,k as j,l as k,m as S,n as R,q as $}from"./vendor.3668da22.js";!function(t=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(s){const o=new URL(t,location),i=t=>{URL.revokeObjectURL(t.src),t.remove()};self[e]=t=>new Promise(((s,n)=>{const a=new URL(t,o);if(self[e].moduleMap[a])return s(self[e].moduleMap[a]);const r=new Blob([`import * as m from '${a}';`,`${e}.moduleMap['${a}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){n(new Error(`Failed to import: ${t}`)),i(l)},onload(){s(self[e].moduleMap[a]),i(l)}});document.head.appendChild(l)})),self[e].moduleMap={}}}("/JustToDo/assets/");var D={mutations:{toggleDone(t,e){const s=t.lists[t.currentListId].items.find((t=>t.id===e));s&&(s.done=!s.done)}}};class C{constructor({title:t,description:e}){this.id=`id${Date.now()}`,this.title=null!=t?t:"Empty title",this.description=null!=e?e:"",this.done=!1,this.repeat=!1,this.createTime=Date.now(),this.editTime=Date.now()}}var N={mutations:{addTodoItem(t,{title:e}){const s=new C({title:e});t.lists[t.currentListId].items.push(s)},removeTodoItem(t,{id:e}){const{items:s}=t.lists[t.currentListId],o=s.findIndex((t=>t.id===e));s.splice(o,1)}}};const E=t=>{const e=localStorage.getItem("currentListId");e?t.commit("setCurrentListId",e):localStorage.setItem("currentListId",t.state.currentListId),Object.keys(t.state.lists).forEach((e=>{const s=localStorage.getItem(`list_${e}`);s?t.commit("setList",{id:e,list:JSON.parse(s)}):localStorage.setItem(`list_${e}`,JSON.stringify(t.state.lists[e]))})),t.subscribe(((t,e)=>{switch(console.log(t),t.type){case"setCurrentListId":localStorage.setItem("currentListId",t.payload);break;case"addTodoItem":case"toggleDone":case"removeTodoItem":localStorage.setItem(`list_${e.currentListId}`,JSON.stringify(e.lists[e.currentListId]));break;default:console.log("unknown mutation")}}))},U={currentListId:"list1",lists:{list1:{title:"List 1",description:"List description 1",items:[{id:"todo1",title:"Todo 1",description:"Todo description 1",done:!1,repeat:!1,createTime:0,editTime:0},{id:"todo2",title:"Todo 2",description:"",done:!0,repeat:!1,createTime:0,editTime:0}]},list2:{title:"List 2",description:"",items:[]}}},M=localStorage.getItem("state"),J=M?JSON.parse(M):{},x={currentListId:null!=(t=J.currentListId)?t:U.currentListId,lists:null!=(e=J.lists)?e:U.lists};var P={state:()=>x,getters:{getTabs:t=>Object.keys(t.lists).map((e=>({id:e,title:t.lists[e].title,description:t.lists[e].description})))},mutations:r(r({setCurrentListId(t,e){t.currentListId=e},setList(t,{id:e,list:s}){t.lists[e]=s}},N.mutations),D.mutations),plugins:[E]},F=l({name:"Input",setup(){const t=d(""),e=c();return{input:t,addTodoItem:()=>{e.commit("addTodoItem",{title:t.value}),t.value=""}}}});const H=v();L("data-v-5383f60d");const q=I("button",null,"➕",-1);f();const V=H(((t,e,s,o,i,n)=>(g(),m("form",{onSubmit:e[2]||(e[2]=b(((...e)=>t.addTodoItem&&t.addTodoItem(...e)),["prevent"]))},[u(I("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.input=e),type:"text"},null,512),[[p,t.input]]),q],32))));F.render=V,F.__scopeId="data-v-5383f60d";var A=l({name:"Tab",props:{tab:{type:Object,required:!0}}});const B=v(),z=B(((t,e,s,o,i,n)=>{const a=T("RouterLink");return g(),m("li",{class:"tab",title:t.tab.description},[I(a,{to:`/list/${t.tab.id}`,class:"tab__link"},{default:B((()=>[y(h(t.tab.title),1)])),_:1},8,["to"])],8,["title"])}));A.render=z,A.__scopeId="data-v-52fc23fc";var G=l({name:"Nav",components:{Tab:A},setup(){const t=c();return{tabs:_((()=>t.getters.getTabs))}}});const K=v()(((t,e,s,o,i,n)=>{const a=T("Tab");return g(),m("nav",null,[I("ul",null,[(g(!0),m(O,null,w(t.tabs,(t=>(g(),m(a,{key:t.id,tab:t},null,8,["tab"])))),128))])])}));G.render=K,G.__scopeId="data-v-4719c70a";var Q=l({name:"Header",components:{Input:F,Nav:G}});const W=v()(((t,e,s,o,i,n)=>{const a=T("Nav"),r=T("Input");return g(),m("header",null,[I(a),I(r)])}));Q.render=W,Q.__scopeId="data-v-3121b9ce";var X=l({name:"App",components:{Header:Q}});X.render=function(t,e,s,o,i,n){const a=T("Header"),r=T("RouterView");return g(),m(O,null,[I(a),I(r)],64)};var Y=l({name:"TodoItem",props:{item:{type:Object,default:new C({})}},emits:["remove-todo-item"],setup(t){const e=c();return{toggleDone:()=>e.commit("toggleDone",t.item.id)}}});const Z=v();L("data-v-3c36a8dc");const tt={key:0},et=I("div",null,"✔️",-1);f();const st=Z(((t,e,s,o,i,n)=>(g(),m("li",null,[I("main",null,[I("h3",{class:t.item.done?"done":"",contenteditable:""},h(t.item.title),3),t.item.description?(g(),m("p",tt,h(t.item.description),1)):j("",!0)]),I("label",null,[et,I("input",{type:"checkbox",onChange:e[1]||(e[1]=(...e)=>t.toggleDone&&t.toggleDone(...e))},null,32)]),I("button",{onClick:e[2]||(e[2]=e=>t.$emit("remove-todo-item"))}," ❌ ")]))));Y.render=st,Y.__scopeId="data-v-3c36a8dc";var ot=l({name:"List",components:{TodoItem:Y},setup(){const t=c();return{list:_((()=>t.state.lists[t.state.currentListId])),onRemoveTodoItem:e=>{t.commit("removeTodoItem",{id:e})}}}});const it=v()(((t,e,s,o,i,n)=>{var a;const r=T("TodoItem");return g(),m("main",null,[I("h1",null,h(t.list.title),1),I("p",null,h(null!=(a=t.list.description)?a:"NO"),1),I("ul",null,[(g(!0),m(O,null,w(t.list.items,(e=>(g(),m(r,{key:e.id,item:e,onRemoveTodoItem:s=>t.onRemoveTodoItem(e.id)},null,8,["item","onRemoveTodoItem"])))),128))])])}));ot.render=it,ot.__scopeId="data-v-cdd9f6da";const nt=k(P),at=[{name:"Main",path:"/",component:ot,redirect(){const t=nt.state.currentListId;if(!nt.state.lists[t]){const t=Object.keys(nt.state.lists)[0];nt.commit("setCurrentListId",t)}return{path:`/list/${t}`}}},{name:"List",path:"/list/:listId",component:ot,beforeEnter(t,e,s){const o="string"==typeof t.params.listId?t.params.listId:t.params.listId[0],i=nt.state.lists[o]?o:nt.state.currentListId;if(!nt.state.lists[i]){const t=Object.keys(nt.state.lists)[0];nt.commit("setCurrentListId",t)}s()}}],rt=S({history:R(),routes:at});rt.beforeEach((t=>{"List"===t.name&&nt.commit("setCurrentListId",t.params.listId)})),$(X).use(nt).use(rt).mount("#app");
