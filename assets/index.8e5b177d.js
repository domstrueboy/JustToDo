var t,e,s=Object.defineProperty,o=Object.prototype.hasOwnProperty,n=Object.getOwnPropertySymbols,i=Object.prototype.propertyIsEnumerable,a=(t,e,o)=>e in t?s(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,r=(t,e)=>{for(var s in e||(e={}))o.call(e,s)&&a(t,s,e[s]);if(n)for(var s of n(e))i.call(e,s)&&a(t,s,e[s]);return t};import{d as l,r as d,u as c,c as m,w as u,v as p,a as I,b,e as v,p as L,f,o as g,t as T,g as y,h,i as O,F as _,j as w,k as j,l as k,m as S,n as R,q as $}from"./vendor.3668da22.js";!function(t=".",e="__import__"){try{self[e]=new Function("u","return import(u)")}catch(s){const o=new URL(t,location),n=t=>{URL.revokeObjectURL(t.src),t.remove()};self[e]=t=>new Promise(((s,i)=>{const a=new URL(t,o);if(self[e].moduleMap[a])return s(self[e].moduleMap[a]);const r=new Blob([`import * as m from '${a}';`,`${e}.moduleMap['${a}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){i(new Error(`Failed to import: ${t}`)),n(l)},onload(){s(self[e].moduleMap[a]),n(l)}});document.head.appendChild(l)})),self[e].moduleMap={}}}("/assets/");var C={mutations:{toggleDone(t,e){const s=t.lists[t.currentListId].items.find((t=>t.id===e));s&&(s.done=!s.done)}}};class D{constructor({title:t,description:e}){this.id=`id${Date.now()}`,this.title=null!=t?t:"Empty title",this.description=null!=e?e:"",this.done=!1,this.repeat=!1,this.createTime=Date.now(),this.editTime=Date.now()}}var N={mutations:{addTodoItem(t,{title:e}){const s=new D({title:e});t.lists[t.currentListId].items.push(s)},removeTodoItem(t,{id:e}){const{items:s}=t.lists[t.currentListId],o=s.findIndex((t=>t.id===e));s.splice(o,1)}}};const E=t=>{const e=localStorage.getItem("currentListId");e?t.commit("setCurrentListId",e):localStorage.setItem("currentListId",t.state.currentListId),Object.keys(t.state.lists).forEach((e=>{const s=localStorage.getItem(`list_${e}`);s?t.commit("setList",{id:e,list:JSON.parse(s)}):localStorage.setItem(`list_${e}`,JSON.stringify(t.state.lists[e]))})),t.subscribe(((t,e)=>{switch(console.log(t),t.type){case"setCurrentListId":localStorage.setItem("currentListId",t.payload);break;case"addTodoItem":case"toggleDone":case"removeTodoItem":localStorage.setItem(`list_${e.currentListId}`,JSON.stringify(e.lists[e.currentListId]));break;default:console.log("unknown mutation")}}))},U={currentListId:"list1",lists:{list1:{title:"List 1",description:"List description 1",items:[{id:"todo1",title:"Todo 1",description:"Todo description 1",done:!1,repeat:!1,createTime:0,editTime:0},{id:"todo2",title:"Todo 2",description:"",done:!0,repeat:!1,createTime:0,editTime:0}]},list2:{title:"List 2",description:"",items:[]}}},M=localStorage.getItem("state"),x=M?JSON.parse(M):{},J={currentListId:null!=(t=x.currentListId)?t:U.currentListId,lists:null!=(e=x.lists)?e:U.lists};var P={state:()=>J,getters:{getTabs:t=>Object.keys(t.lists).map((e=>({id:e,title:t.lists[e].title,description:t.lists[e].description})))},mutations:r(r({setCurrentListId(t,e){t.currentListId=e},setList(t,{id:e,list:s}){t.lists[e]=s}},N.mutations),C.mutations),plugins:[E]},F=l({name:"Input",setup(){const t=d(""),e=c();return{input:t,addTodoItem:()=>{e.commit("addTodoItem",{title:t.value}),t.value=""}}}});const H=v();L("data-v-01f08bea");const q=I("button",null,"+",-1);f();const V=H(((t,e,s,o,n,i)=>(g(),m("form",{onSubmit:e[2]||(e[2]=b(((...e)=>t.addTodoItem&&t.addTodoItem(...e)),["prevent"]))},[u(I("input",{"onUpdate:modelValue":e[1]||(e[1]=e=>t.input=e),type:"text"},null,512),[[p,t.input]]),q],32))));F.render=V,F.__scopeId="data-v-01f08bea";var A=l({name:"Tab",props:{tab:{type:Object,required:!0}}});const B=v();L("data-v-15065682");const z={class:"tab"};f();const G=B(((t,e,s,o,n,i)=>{const a=y("RouterLink");return g(),m("li",z,[I(a,{to:`/list/${t.tab.id}`},{default:B((()=>[h(T(t.tab.title),1)])),_:1},8,["to"]),I("p",null,T(t.tab.description),1)])}));A.render=G,A.__scopeId="data-v-15065682";var K=l({name:"Nav",components:{Tab:A},setup(){const t=c();return{tabs:O((()=>t.getters.getTabs))}}});const Q=v()(((t,e,s,o,n,i)=>{const a=y("Tab");return g(),m("nav",null,[I("ul",null,[(g(!0),m(_,null,w(t.tabs,(t=>(g(),m(a,{key:t.id,tab:t},null,8,["tab"])))),128))])])}));K.render=Q,K.__scopeId="data-v-20819ef5";var W=l({name:"Header",components:{Input:F,Nav:K}});const X=v()(((t,e,s,o,n,i)=>{const a=y("Input"),r=y("Nav");return g(),m("header",null,[I(a),I(r)])}));W.render=X,W.__scopeId="data-v-709f7861";var Y=l({name:"App",components:{Header:W}});Y.render=function(t,e,s,o,n,i){const a=y("Header"),r=y("RouterView");return g(),m(_,null,[I(a),I(r)],64)};var Z=l({name:"TodoItem",props:{item:{type:Object,default:new D({})}},emits:["remove-todo-item"],setup(t){const e=c();return{toggleDone:()=>e.commit("toggleDone",t.item.id)}}});const tt=v();L("data-v-3c36a8dc");const et={key:0},st=I("div",null,"✔️",-1);f();const ot=tt(((t,e,s,o,n,i)=>(g(),m("li",null,[I("main",null,[I("h3",{class:t.item.done?"done":"",contenteditable:""},T(t.item.title),3),t.item.description?(g(),m("p",et,T(t.item.description),1)):j("",!0)]),I("label",null,[st,I("input",{type:"checkbox",onChange:e[1]||(e[1]=(...e)=>t.toggleDone&&t.toggleDone(...e))},null,32)]),I("button",{onClick:e[2]||(e[2]=e=>t.$emit("remove-todo-item"))}," ❌ ")]))));Z.render=ot,Z.__scopeId="data-v-3c36a8dc";var nt=l({name:"List",components:{TodoItem:Z},setup(){const t=c();return{list:O((()=>t.state.lists[t.state.currentListId])),onRemoveTodoItem:e=>{t.commit("removeTodoItem",{id:e})}}}});const it=v()(((t,e,s,o,n,i)=>{var a;const r=y("TodoItem");return g(),m("main",null,[I("h1",null,T(t.list.title),1),I("p",null,T(null!=(a=t.list.description)?a:"NO"),1),I("ul",null,[(g(!0),m(_,null,w(t.list.items,(e=>(g(),m(r,{key:e.id,item:e,onRemoveTodoItem:s=>t.onRemoveTodoItem(e.id)},null,8,["item","onRemoveTodoItem"])))),128))])])}));nt.render=it,nt.__scopeId="data-v-cdd9f6da";const at=k(P),rt=[{name:"Main",path:"/",component:nt,redirect(){const t=at.state.currentListId;if(!at.state.lists[t]){const t=Object.keys(at.state.lists)[0];at.commit("setCurrentListId",t)}return{path:`/list/${t}`}}},{name:"List",path:"/list/:listId",component:nt,beforeEnter(t,e,s){const o="string"==typeof t.params.listId?t.params.listId:t.params.listId[0],n=at.state.lists[o]?o:at.state.currentListId;if(!at.state.lists[n]){const t=Object.keys(at.state.lists)[0];at.commit("setCurrentListId",t)}s()}}],lt=S({history:R(),routes:rt});lt.beforeEach((t=>{"List"===t.name&&at.commit("setCurrentListId",t.params.listId)})),$(Y).use(at).use(lt).mount("#app");
